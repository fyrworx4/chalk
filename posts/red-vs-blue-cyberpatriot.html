<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>tsnguyen | Red vs. Blue - Season 2</title>
  <meta name="description" content="Expanding the Red vs. Blue saga.">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <meta name="google-site-verification" content="rrfms53zaykhCVWMuR5mkjCjwprrP-O-oDsOCAn8H6c" />

  <meta property="og:title" content="Red vs. Blue - Season 2">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://tsnguyen.com/posts/red-vs-blue-cyberpatriot">
  <meta property="og:description" content="Expanding the Red vs. Blue saga.">
  <meta property="og:site_name" content="tsnguyen">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:url" content="https://tsnguyen.com/posts/red-vs-blue-cyberpatriot">
  <meta name="twitter:title" content="Red vs. Blue - Season 2">
  <meta name="twitter:description" content="Expanding the Red vs. Blue saga.">

  
    <meta property="og:image" content="https://tsnguyen.com/assets/og-image-ee46bbc61b334e821e81534b1fd43f3fee6f020ec174b3c2114445695fd48c01.jpg">
    <meta name="twitter:image" content="https://tsnguyen.com/assets/og-image-ee46bbc61b334e821e81534b1fd43f3fee6f020ec174b3c2114445695fd48c01.jpg">
  

  <link href="https://tsnguyen.com/feed.xml" type="application/rss+xml" rel="alternate" title="tsnguyen Last 10 blog posts" />

  

  

    
      <link rel="icon" type="image/x-icon" href="/assets/favicon-dark-e48dce304613b6e84d9116c5ab40660fc6dc1c7821e2364a6f9092739918cfe6.ico">
      <link rel="apple-touch-icon" href="/assets/apple-touch-icon-dark-d161409442b7e523089f24d08d0a55951549ece7504207c376d53b020713494d.png">
      <link rel="stylesheet" type="text/css" href="/assets/dark-831218bc9e41aef39ee6a0bae4501195bccafcc13101ae2b9cd20493a6ec04c0.css">
    

  

</head>

<body>
  <main>
    <div class="grid grid-centered">
      <div class="grid-cell">
        <nav class="header-nav scrollappear">
  <a href="/" class="header-logo" title="tsnguyen">tsnguyen</a>
  <ul class="header-links">
    
      <li>
        <a href="/about" title="About me">
          <svg xmlns="http://www.w3.org/2000/svg" class="icon-about">
  <use href="/assets/about-ecf154b571ab8034ae00aeed91a3b7ad68db80b46d958753ad6216c919486e88.svg#icon-about" xlink:href="/assets/about-ecf154b571ab8034ae00aeed91a3b7ad68db80b46d958753ad6216c919486e88.svg#icon-about"></use>
</svg>

        </a>
      </li>
    
    
    
    
    
      <li>
        <a href="https://github.com/fyrworx4" rel="noreferrer noopener" target="_blank" title="GitHub">
          <svg xmlns="http://www.w3.org/2000/svg" class="icon-github">
  <use href="/assets/github-094f81040819f34343ee6ffff0980f17e2807b08b595eaaf66ae3554934fd78d.svg#icon-github" xlink:href="/assets/github-094f81040819f34343ee6ffff0980f17e2807b08b595eaaf66ae3554934fd78d.svg#icon-github"></use>
</svg>

        </a>
      </li>
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
  </ul>
</nav>



        <article class="article scrollappear">
          <header class="article-header">
            <h1>Red vs. Blue - Season 2</h1>
            <p>Expanding the Red vs. Blue saga.</p>
            <div class="article-list-footer">
  <span class="article-list-date">
    March 15, 2022
  </span>
  <span class="article-list-divider">-</span>
  <span class="article-list-minutes">
    
    
      3 minute read
    
  </span>
  <span class="article-list-divider">-</span>
  <div class="article-list-tags">
    
      
      <a href="/tag/cybersecurity" title="See all posts with tag 'Cybersecurity'">Cybersecurity</a>
    
      
      <a href="/tag/swift" title="See all posts with tag 'SWIFT'">SWIFT</a>
    
  </div>
</div>
          </header>

          <div class="article-content">
            <p>Ever since we held our Red vs. Blue last semester, we’ve made significant changes on the way Red vs. Blue was managed - both from a techincal standpoint and a logistical standpoint.</p>

<p>It was kind of like a dry-run for our high-school version of Red vs. Blue, where we train CyberPatriot teams for Nationals - the original intent of this event.</p>

<h1 id="task-delegation">Task Delegation</h1>

<p>Last semester, I had to step in as the project manager for Red vs. Blue - making sure that boxes were created, networking configured, etc.</p>

<p>This semester, that changed. My eboard members took the charge of managing Red vs. Blue and my main role was listening to status updates. And network troubleshooting (I will get to that in a bit!)</p>

<h1 id="the-scoring-engine">The Scoring Engine</h1>

<p>The <a href="https://github.com/fyrworx4/PulseEngine-ScoringEngine">old scoring engine</a> had many problems:</p>
<ul>
  <li>Too complex.</li>
  <li>Service pollers are too slow.</li>
  <li>Not enough support for scored services.</li>
</ul>

<p>So we looked into a <a href="https://github.com/scoringengine/scoringengine">new scoring engine</a>, which had a ton more features and looked nicer. We needed to do lots of troubleshooting to get this to work, but overwall it was easier to manage and displayed the scores in a better format.</p>

<h1 id="network-troubleshooting">Network Troubleshooting</h1>

<p>One of the previous issues we had during Red vs. Blue in the fall was that red team couldn’t use their own Kali VMs on our host machines - they had to use VMs that were hosted in our lab. In an ideal world, red team would use their customized Kali VMs to VPN into the TelcoLab and be able to perform reverse shells from blue team machines.</p>

<p>But we promised this for next Red vs. Blue, so we had no choice but to deliver.</p>

<p>And the solution was relatively simple - we just needed to add static routes going to the VPN servers. That way, traffic destined to the VPN server’s internal network can be routed through the TelcoLab.</p>

<p>At least we thought - red team still couldn’t get reverse shells. So I looked into the issue for a few days by running tcpdump, using ping and traceroute, running <code class="highlighter-rouge">python3 -m http.server</code> on various hosts on the network and attempting to curl from various hosts on the network.</p>

<p>Ping worked, but any Layer 4 traffic didn’t go through. It was really confusing, so I looked into this even more. What could possibly be blocking Layer 4 (and above layers) traffic?</p>

<p>It was UFW.</p>

<p>Specifically, the VPN servers were running UFW and the default rules were in place.</p>
<ul>
  <li>Deny incoming traffic</li>
  <li>Allow outgoing traffic</li>
  <li>Deny routed traffic</li>
</ul>

<p>There were some rules that allowed specific traffic, but the main culprit was that UFW was <strong>denying routed traffic.</strong></p>

<p>So by seting UFW to allow routed traffic, red team can now get reverse shells.</p>

<h1 id="aws-mishaps">AWS Mishaps</h1>

<p>For one of the Red vs. Blue competitions, we tried out AWS to host our entire infrastructure. We estimated that it’ll be around $200 to host a 4-hour competition - if we use spot instances.</p>

<p>But for some reason, we didn’t use spot instances - it make the automation too complicated so we resorted to using On-Demand instances, which increased our costs around 4x. Green Team also went <em>ham</em> with creating AMIs and restoring EC2 instances (On-Demand!), which generated a lot of EBS overhead. We also needed to spin up tons of Kali machines because they kept breaking.</p>

<p>It wasn’t fun, and I am now $2.6K in debt.</p>

<h1 id="red-teaming-fun">Red Teaming Fun</h1>

<p>Besides destroying my bank account, I got to red team this semester! I feel like I’m becoming part of the dark side by learning more about pentesting. I think this really opened up my interests and potential career path into red teaming.</p>

<p>I just need to do more HTB.</p>

<p>See you on the other side!</p>


          </div>
          <!--<div class="article-share">
            
            
            <a href="https://twitter.com/home?status=Red+vs.+Blue+-+Season+2%20-%20https://tsnguyen.com/posts/red-vs-blue-cyberpatriot" title="Share on Twitter" rel="noreferrer noopener" target="_blank">
              <svg viewBox="0 0 512 512"><path d="M492 109.5c-17.4 7.7-36 12.9-55.6 15.3 20-12 35.4-31 42.6-53.6 -18.7 11.1-39.4 19.2-61.5 23.5C399.8 75.8 374.6 64 346.8 64c-53.5 0-96.8 43.4-96.8 96.9 0 7.6 0.8 15 2.5 22.1 -80.5-4-151.9-42.6-199.6-101.3 -8.3 14.3-13.1 31-13.1 48.7 0 33.6 17.2 63.3 43.2 80.7C67 210.7 52 206.3 39 199c0 0.4 0 0.8 0 1.2 0 47 33.4 86.1 77.7 95 -8.1 2.2-16.7 3.4-25.5 3.4 -6.2 0-12.3-0.6-18.2-1.8 12.3 38.5 48.1 66.5 90.5 67.3 -33.1 26-74.9 41.5-120.3 41.5 -7.8 0-15.5-0.5-23.1-1.4C62.8 432 113.7 448 168.3 448 346.6 448 444 300.3 444 172.2c0-4.2-0.1-8.4-0.3-12.5C462.6 146 479 129 492 109.5z"/></svg>
            </a>
            <a href="https://www.facebook.com/sharer/sharer.php?u=https://tsnguyen.com/posts/red-vs-blue-cyberpatriot" title="Share on Facebook" rel="noreferrer noopener" target="_blank">
              <svg viewBox="0 0 512 512"><path d="M288 192v-38.1c0-17.2 3.8-25.9 30.5-25.9H352V64h-55.9c-68.5 0-91.1 31.4-91.1 85.3V192h-45v64h45v192h83V256h56.4l7.6-64H288z"/></svg>
            </a>
          </div>
          -->

          <!-- 
          -->
        </article>
        <footer class="footer scrollappear">
  <p>
    Chalk is a high quality, completely customizable, performant and 100% free
    blog template for Jekyll built by
    <a href="https://twitter.com/nielsenramon?lang=en">Nielsen Ramon</a>. Download it <a href="https://github.com/nielsenramon/chalk" rel="noreferrer noopener" target="_blank" title="Download Chalk">here</a>.
  </p>
</footer>

      </div>
    </div>
  </main>
  
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-WT5ZHBZ833"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-WT5ZHBZ833');
  </script>


<script src="/assets/vendor-734ddaa553ebf4e6ca703bd7c567ef4a0e43b0ba799607355e56b81e88781318.js" type="text/javascript"></script>


  <script src="/assets/webfonts-96493456d319d1bf419afdf8701552d4d486fee6afd304897d4fd81eb4e0cc0b.js" type="text/javascript"></script>



  <script src="/assets/scrollappear-e2da8ea567e418637e31266cc5302126eaa79f62a2273739086358b589a89ee6.js" type="text/javascript"></script>


<script src="/assets/application-0e69434a66df865cc92b123bd71881f3ec72580523be137646272242afd78a61.js" type="text/javascript"></script>


</body>
</html>
